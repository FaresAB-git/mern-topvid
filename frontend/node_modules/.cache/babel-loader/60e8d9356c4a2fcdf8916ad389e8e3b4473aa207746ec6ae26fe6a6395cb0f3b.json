{"ast":null,"code":"import _regeneratorRuntime from\"C:/projet info/appyoutube/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/projet info/appyoutube/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/projet info/appyoutube/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useState,useEffect}from'react';var useFetch=function useFetch(){var _ref;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),titre=_useState4[0],setTitre=_useState4[1];var myFunction=function myFunction(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var vid,request,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:vid={titre:titre,url:url};console.log(titre);console.log(url);console.log(vid);_context.next=6;return fetch('https://mern-topvid.onrender.com/api/topVid',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(vid)});case 6:request=_context.sent;_context.next=9;return request.json();case 9:json=_context.sent;if(request.ok){setTitre('');setUrl('');console.log('nouvelle video ajouté',json);}case 11:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};useEffect(function(){var api_key=\"AIzaSyAvbx7hVYcSosSEoqY8vmHMIKjmgUcQQW0\";var requetteYoutube=\"https://www.googleapis.com/youtube/v3/videos?key=\"+api_key+\"&part=snippet&chart=mostPopular&regionCode=FR\";axios.get(requetteYoutube).then(function(response){console.log(response);//console.log(response.data.items[0].snippet.title)\nsetTitre(response.data.items[0].snippet.title);setUrl(response.data.items[0].id);}).catch(function(error){console.log(error);});},[]);useEffect(function(){if(titre&&url){myFunction();}},[url]);};export default useFetch;","map":{"version":3,"names":["axios","useState","useEffect","useFetch","_ref","_useState","_useState2","_slicedToArray","url","setUrl","_useState3","_useState4","titre","setTitre","myFunction","_asyncToGenerator","_regeneratorRuntime","mark","_callee","vid","request","json","wrap","_callee$","_context","prev","next","console","log","fetch","method","headers","body","JSON","stringify","sent","ok","stop","apply","arguments","api_key","requetteYoutube","get","then","response","data","items","snippet","title","id","catch","error"],"sources":["C:/projet info/appyoutube/frontend/src/customHooks/useFetch.js"],"sourcesContent":["import axios from 'axios';\r\nimport {useState, useEffect} from 'react'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst useFetch = () => {\r\n    const [url, setUrl]= useState('');\r\n    const [titre, setTitre] = useState('');\r\n   \r\n\r\n    \r\n    const myFunction = async () => {\r\n        const vid = {titre, url}\r\n        console.log(titre);\r\n        console.log(url);\r\n        \r\n        console.log(vid);\r\n        const request = await fetch('https://mern-topvid.onrender.com/api/topVid',{\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(vid)\r\n        });\r\n\r\n        const json = await request.json();\r\n        if(request.ok){\r\n            setTitre('');\r\n            setUrl('');\r\n            console.log('nouvelle video ajouté', json);\r\n        }\r\n    };\r\n    \r\n\r\n    useEffect (() => {\r\n    \r\n    \r\n    const api_key=\"AIzaSyAvbx7hVYcSosSEoqY8vmHMIKjmgUcQQW0\";\r\n    var requetteYoutube = \"https://www.googleapis.com/youtube/v3/videos?key=\" + api_key + \"&part=snippet&chart=mostPopular&regionCode=FR\"\r\n\r\n    axios.get(requetteYoutube).then(function (response) {\r\n        console.log(response);\r\n        //console.log(response.data.items[0].snippet.title)\r\n        setTitre(response.data.items[0].snippet.title);\r\n        setUrl(response.data.items[0].id);\r\n        \r\n\r\n    }).catch(function (error){\r\n        console.log(error);\r\n    });\r\n\r\n    },[]);\r\n\r\n\r\n    useEffect (() => {\r\n        if (titre && url) {\r\n            myFunction();\r\n        }\r\n    },[url]);\r\n    \r\n\r\n    \r\n    \r\n}\r\n\r\n\r\nexport default useFetch;"],"mappings":"wXAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAAQC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAQzC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,KAAAC,IAAA,CACnB,IAAAC,SAAA,CAAqBJ,QAAQ,CAAC,EAAE,CAAC,CAAAK,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1BG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAA0BT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAItB,GAAM,CAAAG,UAAU,SAAV,CAAAA,UAAUA,CAAA,SAAAV,IAAA,CAAAA,IAAA,EAAAW,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,CAAAC,OAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACTP,GAAG,CAAG,CAACP,KAAK,CAALA,KAAK,CAAEJ,GAAG,CAAHA,GAAG,CAAC,CACxBmB,OAAO,CAACC,GAAG,CAAChB,KAAK,CAAC,CAClBe,OAAO,CAACC,GAAG,CAACpB,GAAG,CAAC,CAEhBmB,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC,CAACK,QAAA,CAAAE,IAAA,SACK,CAAAG,KAAK,CAAC,6CAA6C,CAAC,CACtEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACf,GAAG,CAC5B,CAAC,CAAC,QAJIC,OAAO,CAAAI,QAAA,CAAAW,IAAA,CAAAX,QAAA,CAAAE,IAAA,SAMM,CAAAN,OAAO,CAACC,IAAI,CAAC,CAAC,QAA3BA,IAAI,CAAAG,QAAA,CAAAW,IAAA,CACV,GAAGf,OAAO,CAACgB,EAAE,CAAC,CACVvB,QAAQ,CAAC,EAAE,CAAC,CACZJ,MAAM,CAAC,EAAE,CAAC,CACVkB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEP,IAAI,CAAC,CAC9C,CAAC,yBAAAG,QAAA,CAAAa,IAAA,MAAAnB,OAAA,GACJ,IAAAoB,KAAA,MAAAC,SAAA,IAGDrC,SAAS,CAAE,UAAM,CAGjB,GAAM,CAAAsC,OAAO,CAAC,yCAAyC,CACvD,GAAI,CAAAC,eAAe,CAAG,mDAAmD,CAAGD,OAAO,CAAG,+CAA+C,CAErIxC,KAAK,CAAC0C,GAAG,CAACD,eAAe,CAAC,CAACE,IAAI,CAAC,SAAUC,QAAQ,CAAE,CAChDjB,OAAO,CAACC,GAAG,CAACgB,QAAQ,CAAC,CACrB;AACA/B,QAAQ,CAAC+B,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,CAAC,CAC9CvC,MAAM,CAACmC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACG,EAAE,CAAC,CAGrC,CAAC,CAAC,CAACC,KAAK,CAAC,SAAUC,KAAK,CAAC,CACrBxB,OAAO,CAACC,GAAG,CAACuB,KAAK,CAAC,CACtB,CAAC,CAAC,CAEF,CAAC,CAAC,EAAE,CAAC,CAGLjD,SAAS,CAAE,UAAM,CACb,GAAIU,KAAK,EAAIJ,GAAG,CAAE,CACdM,UAAU,CAAC,CAAC,CAChB,CACJ,CAAC,CAAC,CAACN,GAAG,CAAC,CAAC,CAKZ,CAAC,CAGD,cAAe,CAAAL,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}