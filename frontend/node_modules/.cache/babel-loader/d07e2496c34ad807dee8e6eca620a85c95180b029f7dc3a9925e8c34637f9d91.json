{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nconst useFetch = () => {\n  _s();\n  const [url, setUrl] = useState('');\n  const [titre, setTitre] = useState('');\n  const [id, setId] = useState('');\n  const myFunction = async () => {\n    const vid = {\n      titre,\n      url\n    };\n    console.log(titre);\n    console.log(url);\n    console.log(vid);\n    const request = await fetch('/api/topVid', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(vid)\n    });\n    const json = await request.json();\n    if (request.ok) {\n      setTitre('');\n      setUrl('');\n      console.log('nouvelle video ajouté', json);\n    }\n  };\n  useEffect(() => {\n    const api_key = \"AIzaSyAvbx7hVYcSosSEoqY8vmHMIKjmgUcQQW0\";\n    var requetteYoutube = \"https://www.googleapis.com/youtube/v3/videos?key=\" + api_key + \"&part=snippet&chart=mostPopular&regionCode=FR\";\n    axios.get(requetteYoutube).then(function (response) {\n      console.log(response);\n      //console.log(response.data.items[0].snippet.title)\n      setTitre(response.data.items[0].snippet.title);\n      setUrl(\"https://www.youtube.com/watch?v=\" + response.data.items[0].id);\n      setId(response.data.items[0].id);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  useEffect(() => {\n    if (titre && url) {\n      myFunction();\n    }\n  }, [url]);\n};\n_s(useFetch, \"3wugQQYg54y+RqVhlYv2BFFOosY=\");\nexport default useFetch;","map":{"version":3,"names":["axios","useState","useEffect","useFetch","_s","url","setUrl","titre","setTitre","id","setId","myFunction","vid","console","log","request","fetch","method","headers","body","JSON","stringify","json","ok","api_key","requetteYoutube","get","then","response","data","items","snippet","title","catch","error"],"sources":["C:/projet info/appyoutube/frontend/src/customHooks/useFetch.js"],"sourcesContent":["import axios from 'axios';\r\nimport {useState, useEffect} from 'react'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst useFetch = () => {\r\n    const [url, setUrl]= useState('');\r\n    const [titre, setTitre] = useState('');\r\n    const [id, setId] = useState('');\r\n\r\n    \r\n    const myFunction = async () => {\r\n        const vid = {titre, url}\r\n        console.log(titre);\r\n        console.log(url);\r\n        console.log(vid);\r\n        const request = await fetch('/api/topVid',{\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(vid)\r\n        });\r\n\r\n        const json = await request.json();\r\n        if(request.ok){\r\n            setTitre('');\r\n            setUrl('');\r\n            console.log('nouvelle video ajouté', json);\r\n        }\r\n    };\r\n    \r\n\r\n    useEffect (() => {\r\n    \r\n    \r\n    const api_key=\"AIzaSyAvbx7hVYcSosSEoqY8vmHMIKjmgUcQQW0\";\r\n    var requetteYoutube = \"https://www.googleapis.com/youtube/v3/videos?key=\" + api_key + \"&part=snippet&chart=mostPopular&regionCode=FR\"\r\n\r\n    axios.get(requetteYoutube).then(function (response) {\r\n        console.log(response);\r\n        //console.log(response.data.items[0].snippet.title)\r\n        setTitre(response.data.items[0].snippet.title);\r\n        setUrl(\"https://www.youtube.com/watch?v=\" + response.data.items[0].id);\r\n        setId(response.data.items[0].id);\r\n\r\n    }).catch(function (error){\r\n        console.log(error);\r\n    });\r\n\r\n    },[]);\r\n\r\n\r\n    useEffect (() => {\r\n        if (titre && url) {\r\n            myFunction();\r\n        }\r\n    },[url]);\r\n    \r\n\r\n    \r\n    \r\n}\r\n\r\n\r\nexport default useFetch;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,QAAQ,EAAEC,SAAS,QAAO,OAAO;AAQzC,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAEL,QAAQ,CAAC,EAAE,CAAC;EACjC,MAAM,CAACM,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACQ,EAAE,EAAEC,KAAK,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAGhC,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,MAAMC,GAAG,GAAG;MAACL,KAAK;MAAEF;IAAG,CAAC;IACxBQ,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;IAClBM,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC;IAChBQ,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAChB,MAAMG,OAAO,GAAG,MAAMC,KAAK,CAAC,aAAa,EAAC;MACtCC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACT,GAAG;IAC5B,CAAC,CAAC;IAEF,MAAMU,IAAI,GAAG,MAAMP,OAAO,CAACO,IAAI,CAAC,CAAC;IACjC,IAAGP,OAAO,CAACQ,EAAE,EAAC;MACVf,QAAQ,CAAC,EAAE,CAAC;MACZF,MAAM,CAAC,EAAE,CAAC;MACVO,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEQ,IAAI,CAAC;IAC9C;EACJ,CAAC;EAGDpB,SAAS,CAAE,MAAM;IAGjB,MAAMsB,OAAO,GAAC,yCAAyC;IACvD,IAAIC,eAAe,GAAG,mDAAmD,GAAGD,OAAO,GAAG,+CAA+C;IAErIxB,KAAK,CAAC0B,GAAG,CAACD,eAAe,CAAC,CAACE,IAAI,CAAC,UAAUC,QAAQ,EAAE;MAChDf,OAAO,CAACC,GAAG,CAACc,QAAQ,CAAC;MACrB;MACApB,QAAQ,CAACoB,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,CAAC;MAC9C1B,MAAM,CAAC,kCAAkC,GAAGsB,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACrB,EAAE,CAAC;MACtEC,KAAK,CAACkB,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACrB,EAAE,CAAC;IAEpC,CAAC,CAAC,CAACwB,KAAK,CAAC,UAAUC,KAAK,EAAC;MACrBrB,OAAO,CAACC,GAAG,CAACoB,KAAK,CAAC;IACtB,CAAC,CAAC;EAEF,CAAC,EAAC,EAAE,CAAC;EAGLhC,SAAS,CAAE,MAAM;IACb,IAAIK,KAAK,IAAIF,GAAG,EAAE;MACdM,UAAU,CAAC,CAAC;IAChB;EACJ,CAAC,EAAC,CAACN,GAAG,CAAC,CAAC;AAKZ,CAAC;AAAAD,EAAA,CAvDKD,QAAQ;AA0Dd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}